<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
  <head>
<%= render 'layouts/head.html.erb' %>
    <title>商品検索</title>
  </head>

  <body>
<%= render 'layouts/header.html.erb' %>
    <main>
      <% if @products.present? %>

        <div class="mt-5 mx-auto" style="width: 200px">
          <h2>商品検索画面</h2>
        </div>

        <div class="container mt-5">
          <form action="#" method="post">
            <div class="mx-auto row">
              <label for="colFormLabelLg" class="col-sm-2 col-form-label col-form-label-lg">商品名</label>
              <div class="col-sm-6">
                <input type="text" class="form-control form-control-lg" id="colFormLabelLg" required />
              </div>
              <div class="col-sm-4 mt-1">
                <button type="submit" class="btn btn-primary" style="width: 80px">
                  検索
                </button>
              </div>
            </div>
          </form>
        </div>

        <div class="container">
          <div class="mx-auto row">
            <label class="col-sm-2 col-form-label col-form-label-lg" for="exampleFormControlSelect2">商品カテゴリ</label>
            <div class="col-sm-4">
              <select id="exampleFormControlSelect2" class="form-control">
                <option selected>未選択</option>
                  <% @categories.each do |category| %>
                    <option><%= category.category_name %></option>
                  <% end %>
              </select>
            </div>
          </div>
        </div>

        <div class="container">
          <p><%= "全#{@products.total_count}件" %></p>
          <table class="table table-hover product-table" border="1" style="border-collapse: collapse">
            <thead>
              <tr class="table-header">
                <th class="text-left" width="55%">
                  商品名
                </th>
                <th class="text-center" width="15%">
                  商品カテゴリ
                </th>
                <th class="text-center" width="15%">
                  価格
                </th>
                <th class="text-center" width="15%"></th>
              </tr>
            </thead>
            <tbody>
              <% @products.each do |product| %>
                <tr>
                  <td scope="row">
                    <%= product.product_name %>
                  </td>
                  <td class="text-center">
                    <%= product.category.category_name %>
                  </td>
                  <td class="text-center">
                    <%= "#{product.price}円" %>
                  </td>
                  <td class="text-center">
                    <%= link_to "商品詳細", product_path(product) , class:"btn btn-primary btn-sm"%>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>

        <div class="container">
          <nav aria-label="...">
            <ul class="pagination justify-content-center">
              <%= paginate @products %>
            </ul>
          </nav>
        </div>

      <% else %>

        <div class="container">
          <div class="mt-5 text-center">
            <h1>該当商品が見つかりませんでした…</h1>
            <p class="mt-5">商品検索画面に戻り、やり直してください</p>
            <button type="button" class="btn btn-primary">商品検索画面へ</button>
          </div>
        </div>

      <% end %>
    </main>
<%= render 'layouts/footer.html.erb' %>
  </body>

</html>
